@startuml cwt-tobe-conceptual-model
'left to right direction

hide stereotype
skinparam usecase {
  BackgroundColor<<New>> #SkyBlue
  BorderColor<<New>> #DodgerBlue

  BackgroundColor<<Deprecated>> #LightCoral  
  BorderColor<<Deprecated>> #OrangeRed

  BackgroundColor<<Future>> #Moccasin  
  BorderColor<<Future>> #SandyBrown  
}

skinparam component {
  BackgroundColor<<New>> #SkyBlue
  BorderColor<<New>> #DodgerBlue

  BackgroundColor<<Deprecated>> #LightCoral  
  BorderColor<<Deprecated>> #OrangeRed
}

skinparam queue {
  BackgroundColor<<Future>> #Moccasin  
  BorderColor<<Future>> #SandyBrown    
}

skinparam arrow {
  Color<<Deprecated>> #OrangeRed 
}

skinparam rectangle {
  BackgroundColor<<New>> #SkyBlue
  BorderColor<<New>> #DodgerBlue

  BackgroundColor<<Deprecated>> #LightCoral  
  BorderColor<<Deprecated>> #OrangeRed

  BackgroundColor<<Future>> #Moccasin  
  BorderColor<<Future>> #SandyBrown    
}

component "Local Cancer System" as lcs
queue "Event Stream" <<Future>> as es
artifact "CWT Extract" as file

usecase "0. Manual Upload" <<Deprecated>> as mup
usecase "1. Automated Upload" <<New>> as aup
usecase "2. Direct Integration" <<New>> as di
usecase "3. Eventing" <<Future>> as ev

package "CWT Data Collection" {

component "CWT Portal" as cwt
component "Command API" <<New>> as capi
database "CWT Database" as db
component "Export API" <<New>>   as eapi

cwt - capi
capi -- db : Match and merge\nDerivations 
db -- eapi

}

package "CWT Reports and Analysis" {

component "Open Analytics" <<New>> as oa
database "Data warehouse" as dw
component "Query API" <<New>> as qapi
artifact "Dashboards" as dbs
artifact "Reports" as rpt

}

note as n1
  pseudo-anonymised
  record level data
endnote

note as n2
  Standards Compliance
endnote

note as n3
  Aggregated data 
  incl. demographics
endnote

lcs .. file
file .. mup<<Deprecated>>
mup .. cwt<<Deprecated>>

file -- aup
aup -- capi

lcs --- di : batch mode/\nreal-time
di -- capi

lcs --- ev : real-time
ev -- es
capi - es

eapi -- oa : ELT
oa -- dw

dw -- qapi

qapi -- dbs
qapi -- rpt

eapi - n1
oa - n2
qapi - n3

legend right
|= Key |
|<#LightCoral>Deprecated|
|<#SkyBlue>New|
|<#SandyBrown>Future|
endlegend

@enduml